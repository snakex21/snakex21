<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>K√≥≈Çko i krzy≈ºyk ‚Äì Max Playground</title>
    <meta name="description" content="Graj w k√≥≈Çko i krzy≈ºyk na jednym ekranie. Dw√≥ch graczy na zmianƒô stawia X i O, a plansza dopasowuje siƒô do Twojego urzƒÖdzenia." />
    <link rel="icon" type="image/x-icon" href="https://www.solojuve.com/spolecznosc/zdj%C4%99cia/306-bezimienny-jpg/pobierz" />
    <link rel="stylesheet" href="../../assets/css/site.css" />
    <link rel="stylesheet" href="../../assets/css/game-page.css" />
    <style>
        .game-stage--tictactoe {
            --ttt-board-gap: clamp(0.6rem, 2vw, 1rem);
            --ttt-tile-radius: 26px;
            --ttt-accent-x: #38bdf8;
            --ttt-accent-o: #f472b6;
            --ttt-surface: linear-gradient(150deg, rgba(30, 41, 59, 0.88), rgba(15, 23, 42, 0.95));
            --ttt-border: rgba(148, 163, 184, 0.35);
        }

        .game-stage--tictactoe .game-stage__board {
            justify-content: center;
            gap: clamp(1rem, 3vw, 1.75rem);
        }

        .tictactoe-app {
            width: min(920px, 100%);
            display: grid;
            gap: clamp(1rem, 3vw, 1.75rem);
            justify-items: center;
        }

        .tictactoe-board {
            width: min(520px, 90vw);
            aspect-ratio: 1 / 1;
            background: var(--ttt-surface);
            border-radius: calc(var(--ttt-tile-radius) * 1.4);
            border: 1px solid var(--ttt-border);
            padding: clamp(1rem, 3vw, 1.6rem);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--ttt-board-gap);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.06), 0 28px 60px rgba(15, 23, 42, 0.55);
        }

        .tictactoe-cell {
            border: none;
            border-radius: var(--ttt-tile-radius);
            background: rgba(15, 23, 42, 0.65);
            color: #f8fafc;
            font-weight: 700;
            font-size: clamp(2.5rem, 6vw, 3.4rem);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05), 0 18px 35px rgba(8, 47, 73, 0.45);
            transition: transform 0.18s ease, box-shadow 0.18s ease, background 0.18s ease, color 0.18s ease;
        }

        .tictactoe-cell:hover:not(:disabled) {
            transform: translateY(-4px);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 28px 60px rgba(8, 47, 73, 0.55);
        }

        .tictactoe-cell:disabled {
            cursor: default;
            opacity: 0.9;
        }

        .tictactoe-cell.is-x {
            color: var(--ttt-accent-x);
        }

        .tictactoe-cell.is-o {
            color: var(--ttt-accent-o);
        }

        .tictactoe-cell.is-winning {
            background: rgba(45, 212, 191, 0.18);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.15), 0 28px 70px rgba(45, 212, 191, 0.32);
        }

        .tictactoe-hud {
            width: min(840px, 100%);
            display: grid;
            gap: clamp(0.75rem, 2vw, 1.25rem);
            justify-items: center;
        }

        .tictactoe-turn {
            font-size: clamp(1.05rem, 2.4vw, 1.35rem);
            font-weight: 600;
            color: var(--color-text);
            text-align: center;
        }

        .game-stage--tictactoe .game-hud .game-score {
            min-width: clamp(120px, 30vw, 160px);
        }

        .game-stage--tictactoe .game-hud .game-score.is-active {
            border-color: rgba(56, 189, 248, 0.5);
            box-shadow: 0 14px 25px rgba(56, 189, 248, 0.28);
        }

        .tictactoe-actions {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
        }

        .tictactoe-actions button {
            border-radius: 14px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            padding: 0.65rem 1.4rem;
            font-weight: 600;
            font-size: 0.95rem;
            background: rgba(30, 64, 175, 0.18);
            color: var(--color-text);
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease;
        }

        .tictactoe-actions button:hover {
            transform: translateY(-2px);
            box-shadow: 0 16px 35px rgba(30, 64, 175, 0.28);
            background: rgba(56, 189, 248, 0.22);
        }

        .tictactoe-actions button:focus-visible {
            outline: 2px solid rgba(56, 189, 248, 0.75);
            outline-offset: 3px;
        }

        .tictactoe-history {
            width: min(520px, 100%);
            padding: 1rem 1.25rem;
            border-radius: 20px;
            border: 1px solid rgba(148, 163, 184, 0.25);
            background: rgba(15, 23, 42, 0.08);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08);
        }

        .tictactoe-history h2 {
            margin: 0 0 0.6rem;
            font-size: 1.1rem;
            letter-spacing: 0.04em;
        }

        .tictactoe-history p {
            margin: 0;
            color: var(--color-text-muted);
            font-size: 0.92rem;
        }

        .tictactoe-history ol {
            margin: 0;
            padding-left: 1.1rem;
            display: grid;
            gap: 0.35rem;
            color: var(--color-text-muted);
            font-size: 0.9rem;
        }

        @media (max-width: 720px) {
            .tictactoe-board {
                width: min(92vw, 420px);
            }
        }

        @media (max-width: 520px) {
            .tictactoe-board {
                padding: 0.85rem;
                gap: clamp(0.45rem, 4vw, 0.65rem);
                border-radius: calc(var(--ttt-tile-radius) * 1.1);
            }

            .tictactoe-cell {
                border-radius: calc(var(--ttt-tile-radius) * 0.75);
            }
        }
    </style>
    <script defer src="../../assets/js/site.js"></script>
</head>
<body class="game-page" data-root="../../">
    <header class="site-header">
        <nav class="main-nav" aria-label="G≈Ç√≥wna nawigacja">
            <a class="nav-brand" href="../../index.html"><span>MX</span>Max Playground</a>
            <button class="nav-toggle" type="button" data-nav-toggle aria-expanded="false" aria-controls="primary-navigation">Menu</button>
            <div class="nav-menu" data-nav-menu id="primary-navigation">
                <a class="nav-link" href="../../index.html">Strona g≈Ç√≥wna</a>
                <div class="nav-item nav-item--dropdown">
                    <button class="nav-dropdown-toggle" type="button" data-dropdown-toggle aria-haspopup="true" aria-expanded="false" aria-controls="nav-programy">Programy</button>
                    <div class="nav-dropdown" id="nav-programy" role="menu">
                        <a href="../../Programy/programy.html">PrzeglƒÖd wszystkich program√≥w</a>
                        <a href="../../Programy/generator kolorow/generator kolorow.html">Generator kolor√≥w</a>
                        <a href="../../Programy/generator czcionek/generator czcionek.html">Generator czcionek</a>
                        <a href="../../Programy/generator emoji/generator emoji.html">Generator emoji</a>
                    </div>
                </div>
                <a class="nav-link is-active" href="../gry.html">Gry</a>
                <a class="nav-link" href="../../filmy/filmy glowna.html">Filmy</a>
                <a class="nav-link" href="../../muzyka/muzyka.html">Muzyka</a>
                <a class="nav-link" href="../../zmiany.html">Dziennik zmian</a>
            </div>
            <div class="nav-actions">
                <button class="btn btn-ghost theme-toggle" type="button" data-theme-toggle aria-pressed="false">üåô Tryb nocny</button>
                <div class="header-clock">
                    <span class="clock-time" data-clock-time>--:--:--</span>
                    <span class="clock-date" data-clock-date>≈Åadowanie‚Ä¶</span>
                </div>
            </div>
        </nav>
    </header>
    <main>
        <article class="game-stage game-stage--tictactoe">
            <header class="game-stage__header">
                <div>
                    <span class="game-eyebrow">Hot seat</span>
                    <h1>K√≥≈Çko i krzy≈ºyk</h1>
                    <p>Dw√≥ch graczy przy jednym urzƒÖdzeniu. Klikaj pola na zmianƒô, zbieraj wygrane rundy i obserwuj historiƒô pojedynk√≥w bez opuszczania planszy.</p>
                </div>
                <div class="game-hud">
                    <div class="game-score" data-player="x">
                        <span>Wygrane X</span>
                        <strong data-score-x>0</strong>
                    </div>
                    <div class="game-score" data-player="o">
                        <span>Wygrane O</span>
                        <strong data-score-o>0</strong>
                    </div>
                    <div class="game-score" data-player="draws">
                        <span>Remisy</span>
                        <strong data-score-draws>0</strong>
                    </div>
                </div>
            </header>

            <div class="game-stage__board">
                <div class="tictactoe-app">
                    <div class="tictactoe-hud">
                        <div class="tictactoe-turn" data-turn-display>Runda 1 ¬∑ Tura gracza X</div>
                        <div class="tictactoe-actions">
                            <button type="button" data-action="next">Nowa runda</button>
                            <button type="button" data-action="reset">Wyzeruj mecz</button>
                        </div>
                    </div>

                    <div class="tictactoe-board" role="grid" aria-label="Plansza gry k√≥≈Çko i krzy≈ºyk">
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 1" data-index="0"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 2" data-index="1"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 3" data-index="2"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 4" data-index="3"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 5" data-index="4"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 6" data-index="5"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 7" data-index="6"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 8" data-index="7"></button>
                        <button type="button" class="tictactoe-cell" data-cell aria-label="Pole 9" data-index="8"></button>
                    </div>

                    <p class="game-status" data-status aria-live="polite">Rozpocznij rundƒô i doprowad≈∫ do trzech swoich symboli w linii.</p>

                    <section class="tictactoe-history" aria-live="polite">
                        <h2>Historia partii</h2>
                        <p data-history-empty>Jeszcze nie rozegrano ≈ºadnej partii.</p>
                        <ol data-history></ol>
                    </section>
                </div>
            </div>
        </article>
    </main>
    <script>
        (() => {
            const cells = Array.from(document.querySelectorAll('[data-cell]'));
            const turnDisplay = document.querySelector('[data-turn-display]');
            const statusEl = document.querySelector('[data-status]');
            const scoreXEl = document.querySelector('[data-score-x]');
            const scoreOEl = document.querySelector('[data-score-o]');
            const scoreDrawEl = document.querySelector('[data-score-draws]');
            const historyList = document.querySelector('[data-history]');
            const historyEmpty = document.querySelector('[data-history-empty]');
            const nextButton = document.querySelector('[data-action="next"]');
            const resetButton = document.querySelector('[data-action="reset"]');
            const scoreCards = {
                X: document.querySelector('[data-player="x"]'),
                O: document.querySelector('[data-player="o"]'),
            };

            const winningCombos = [
                [0, 1, 2],
                [3, 4, 5],
                [6, 7, 8],
                [0, 3, 6],
                [1, 4, 7],
                [2, 5, 8],
                [0, 4, 8],
                [2, 4, 6],
            ];

            const state = {
                board: Array(9).fill(null),
                current: 'X',
                finished: false,
                moves: 0,
                round: 1,
                scores: {
                    X: 0,
                    O: 0,
                    draws: 0,
                },
            };

            function updateTurnDisplay() {
                if (state.finished) {
                    return;
                }
                turnDisplay.textContent = `Runda ${state.round} ¬∑ Tura gracza ${state.current}`;
                scoreCards.X.classList.toggle('is-active', state.current === 'X');
                scoreCards.O.classList.toggle('is-active', state.current === 'O');
            }

            function setStatus(text, variant = '') {
                statusEl.textContent = text;
                statusEl.classList.remove('won', 'lose');
                if (variant) {
                    statusEl.classList.add(variant);
                }
            }

            function clearBoardUI() {
                cells.forEach((cell) => {
                    cell.textContent = '';
                    cell.disabled = false;
                    cell.classList.remove('is-x', 'is-o', 'is-winning');
                });
            }

            function checkWinner() {
                for (const combo of winningCombos) {
                    const [a, b, c] = combo;
                    const mark = state.board[a];
                    if (mark && mark === state.board[b] && mark === state.board[c]) {
                        return { winner: mark, combo };
                    }
                }
                if (state.moves === state.board.length) {
                    return { winner: null, combo: [] };
                }
                return null;
            }

            function highlightCombo(combo) {
                combo.forEach((index) => {
                    const cell = cells[index];
                    if (cell) {
                        cell.classList.add('is-winning');
                    }
                });
            }

            function finishRound(result) {
                state.finished = true;
                scoreCards.X.classList.remove('is-active');
                scoreCards.O.classList.remove('is-active');
                cells.forEach((cell) => (cell.disabled = true));

                let message;
                if (result.winner) {
                    state.scores[result.winner] += 1;
                    message = `Gracz ${result.winner} wygrywa rundƒô ${state.round}!`;
                    setStatus(message, 'won');
                    highlightCombo(result.combo);
                    turnDisplay.textContent = message;
                } else {
                    state.scores.draws += 1;
                    message = `Runda ${state.round} ko≈Ñczy siƒô remisem.`;
                    setStatus(message);
                    turnDisplay.textContent = message;
                }

                scoreXEl.textContent = state.scores.X;
                scoreOEl.textContent = state.scores.O;
                scoreDrawEl.textContent = state.scores.draws;
                appendHistoryEntry(message);
            }

            function appendHistoryEntry(text) {
                const entry = document.createElement('li');
                entry.textContent = text;
                historyList.prepend(entry);
                historyEmpty.hidden = true;
                const maxEntries = 8;
                while (historyList.children.length > maxEntries) {
                    historyList.removeChild(historyList.lastElementChild);
                }
            }

            function handleCellClick(event) {
                const cell = event.currentTarget;
                const index = Number(cell.dataset.index);
                if (state.finished || state.board[index]) {
                    return;
                }

                state.board[index] = state.current;
                state.moves += 1;
                cell.textContent = state.current;
                cell.classList.add(state.current === 'X' ? 'is-x' : 'is-o');
                cell.disabled = true;

                const result = checkWinner();
                if (result) {
                    finishRound(result);
                } else {
                    state.current = state.current === 'X' ? 'O' : 'X';
                    updateTurnDisplay();
                    setStatus(`Twoim zadaniem jest u≈Ço≈ºyƒá trzy symbole ${state.current} w linii.`);
                }
            }

            function newRound(resetScore = false) {
                state.board.fill(null);
                state.moves = 0;
                state.finished = false;
                state.current = state.round % 2 === 0 ? 'O' : 'X';

                if (resetScore) {
                    state.scores.X = 0;
                    state.scores.O = 0;
                    state.scores.draws = 0;
                    state.round = 1;
                    state.current = 'X';
                    historyList.innerHTML = '';
                    historyEmpty.hidden = false;
                }

                clearBoardUI();
                updateTurnDisplay();
                setStatus('Rozpocznij rundƒô i doprowad≈∫ do trzech swoich symboli w linii.');

                scoreXEl.textContent = state.scores.X;
                scoreOEl.textContent = state.scores.O;
                scoreDrawEl.textContent = state.scores.draws;
            }

            cells.forEach((cell) => cell.addEventListener('click', handleCellClick));
            nextButton.addEventListener('click', () => {
                if (!state.finished && state.moves > 0) {
                    appendHistoryEntry(`Runda ${state.round} zosta≈Ça przerwana.`);
                }
                state.round += 1;
                newRound();
            });

            resetButton.addEventListener('click', () => {
                newRound(true);
            });

            newRound();
        })();
    </script>
</body>
</html>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>K√≥≈Çko i krzy≈ºyk ‚Äî Max Playground</title>
  <meta name="description" content="Zagraj lokalnie z drugim graczem lub ze sztucznƒÖ inteligencjƒÖ. Prosta plansza 3√ó3, szybkie partie." />
  <link rel="icon" type="image/x-icon" href="https://www.solojuve.com/spolecznosc/zdj%C4%99cia/306-bezimienny-jpg/pobierz" />
  <link rel="stylesheet" href="../../assets/css/site.css" />
  <link rel="stylesheet" href="../../assets/css/game-page.css" />
  <style>
    .game-stage--ttt {
      --ttt-board-size: min(82vmin, 560px);
      --ttt-accent: #38bdf8;
      --ttt-border: rgba(148,163,184,.35);
      --ttt-bg-panel: rgba(148,163,184,.12);
      --ttt-tile: rgba(148,163,184,.20);
      --ttt-tile-alt: rgba(100,116,139,.26);
    }
    .game-stage--ttt .game-stage__board { justify-content: center; }
    .game-stage--ttt .ttt-app { width: 100%; max-width: 960px; display: flex; flex-direction: column; align-items: center; gap: clamp(1rem,2.5vw,1.6rem); }
    .game-stage--ttt .ttt-toolbar { display: grid; gap: clamp(.75rem,2vw,1.25rem); width: min(100%, 720px); grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); }
    .game-stage--ttt .ttt-toolbar fieldset { margin: 0; padding: clamp(.85rem,2vw,1.25rem); border-radius: 18px; border: 1px solid var(--ttt-border); background: var(--ttt-bg-panel); display: flex; flex-direction: column; gap: .6rem; color: var(--color-text,#e2e8f0); }
    .game-stage--ttt .ttt-toolbar legend { font-size: .85rem; text-transform: uppercase; letter-spacing: .12em; color: rgba(226,232,240,.72); }
    .game-stage--ttt .ttt-actions { display: flex; align-items: center; justify-content: center; }
    .game-stage--ttt .ttt-board { inline-size: min(var(--ttt-board-size), 100%); aspect-ratio: 1/1; display: grid; grid-template-columns: repeat(3,1fr); gap: clamp(.6rem, 1.8vw, .9rem); border-radius: clamp(18px,4vw,26px); padding: clamp(.85rem,2vw,1.35rem); background: linear-gradient(145deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.92)); box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 28px 65px rgba(8, 47, 73, .55); border: 1px solid rgba(148,163,184,.2); }
    .game-stage--ttt .ttt-cell { position: relative; display: grid; place-items: center; background: var(--ttt-tile); border-radius: clamp(8px,1.7vw,12px); border: 1px solid rgba(15,23,42,.35); color: #e2e8f0; font-weight: 800; font-size: clamp(3rem, 14vmin, 6rem); cursor: pointer; transition: background .2s ease, transform .08s ease; }
    .game-stage--ttt .ttt-cell:nth-child(odd) { background: var(--ttt-tile-alt); }
    .game-stage--ttt .ttt-cell:disabled { cursor: default; opacity: .9; }
    .game-stage--ttt .ttt-cell.win { outline: 3px solid rgba(56,189,248,.75); }
    .game-stage--ttt .ttt-legend { color: rgba(226,232,240,.65); text-align: center; max-width: min(60ch,100%); }
  </style>
  <script defer src="../../assets/js/site.js"></script>
</head>
<body class="game-page" data-root="../..//">
  <header class="site-header">
    <nav class="main-nav" aria-label="G≈Ç√≥wna nawigacja">
      <a class="nav-brand" href="../../index.html"><span>MX</span>Max Playground</a>
      <button class="nav-toggle" type="button" data-nav-toggle aria-expanded="false" aria-controls="primary-navigation">Menu</button>
      <div class="nav-menu" data-nav-menu id="primary-navigation">
        <a class="nav-link" href="../../index.html">Strona g≈Ç√≥wna</a>
        <div class="nav-item nav-item--dropdown">
          <button class="nav-dropdown-toggle" type="button" data-dropdown-toggle aria-haspopup="true" aria-expanded="false" aria-controls="nav-programy">Programy</button>
          <div class="nav-dropdown" id="nav-programy" role="menu">
            <a href="../../Programy/programy.html">PrzeglƒÖd wszystkich program√≥w</a>
            <a href="../../Programy/generator kolorow/generator kolorow.html">Generator kolor√≥w</a>
            <a href="../../Programy/generator czcionek/generator czcionek.html">Generator czcionek</a>
            <a href="../../Programy/generator emoji/generator emoji.html">Generator emoji</a>
          </div>
        </div>
        <a class="nav-link is-active" href="../gry.html">Gry</a>
        <a class="nav-link" href="../../filmy/filmy glowna.html">Filmy</a>
        <a class="nav-link" href="../../muzyka/muzyka.html">Muzyka</a>
        <a class="nav-link" href="../../zmiany.html">Dziennik zmian</a>
      </div>
      <div class="nav-actions">
        <button class="btn btn-ghost theme-toggle" type="button" data-theme-toggle aria-pressed="false">Tryb nocny</button>
        <div class="header-clock">
          <span class="clock-time" data-clock-time>--:--:--</span>
          <span class="clock-date" data-clock-date>≈Åadowanie‚Ä¶</span>
        </div>
      </div>
    </nav>
  </header>
  <main>
    <section class="game-stage game-stage--ttt">
      <header class="game-stage__header">
        <div>
          <span class="game-eyebrow">Plansz√≥wka</span>
          <h1>K√≥≈Çko i krzy≈ºyk</h1>
          <p>Zagraj lokalnie z drugim graczem lub ze sztucznƒÖ inteligencjƒÖ. Prosta plansza 3√ó3 i szybkie partie.</p>
        </div>
        <div class="game-hud">
          <div class="game-score"><span>Tura</span> <strong data-ttt-turn>X</strong></div>
          <div class="game-score"><span>Wynik</span> <strong><span data-ttt-score-x>0</span>‚Äâ:‚Äâ<span data-ttt-score-o>0</span> (<span data-ttt-draws>0</span>)</strong></div>
        </div>
      </header>
      <div class="game-stage__board">
        <div class="game-board">
          <div class="game-board__inner ttt-app">
            <div class="ttt-toolbar" role="group" aria-label="Sterowanie k√≥≈Çkiem i krzy≈ºykiem">
              <fieldset>
                <legend>Tryb gry</legend>
                <label><input type="radio" name="mode" value="pvp" checked> <span>Cz≈Çowiek vs cz≈Çowiek</span></label>
                <label><input type="radio" name="mode" value="ai"> <span>Cz≈Çowiek vs SI</span></label>
              </fieldset>
              <fieldset data-ttt-ai>
                <legend>Poziom SI</legend>
                <label><input type="radio" name="ai" value="easy" checked> <span>≈Åatwy</span></label>
                <label><input type="radio" name="ai" value="normal"> <span>Normalny</span></label>
                <label><input type="radio" name="ai" value="hard"> <span>Trudny</span></label>
              </fieldset>
              <fieldset>
                <legend>Pierwszy ruch</legend>
                <label><input type="radio" name="first" value="X" checked> <span>X</span></label>
                <label><input type="radio" name="first" value="O"> <span>O</span></label>
              </fieldset>
              <div class="ttt-actions">
                <button class="btn" type="button" data-ttt-new>Nowa partia</button>
              </div>
            </div>
            <div class="ttt-board" role="application" aria-label="Plansza k√≥≈Çko i krzy≈ºyk">
              <button class="ttt-cell" data-idx="0" aria-label="Pole 1"></button>
              <button class="ttt-cell" data-idx="1" aria-label="Pole 2"></button>
              <button class="ttt-cell" data-idx="2" aria-label="Pole 3"></button>
              <button class="ttt-cell" data-idx="3" aria-label="Pole 4"></button>
              <button class="ttt-cell" data-idx="4" aria-label="Pole 5"></button>
              <button class="ttt-cell" data-idx="5" aria-label="Pole 6"></button>
              <button class="ttt-cell" data-idx="6" aria-label="Pole 7"></button>
              <button class="ttt-cell" data-idx="7" aria-label="Pole 8"></button>
              <button class="ttt-cell" data-idx="8" aria-label="Pole 9"></button>
            </div>
            <p class="ttt-legend">Kliknij puste pole, aby wykonaƒá ruch. W trybie SI przeciwnik odpowie automatycznie.</p>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script>
    (() => {
      const cells = Array.from(document.querySelectorAll('.ttt-cell'));
      const turnEl = document.querySelector('[data-ttt-turn]');
      const scoreXEl = document.querySelector('[data-ttt-score-x]');
      const scoreOEl = document.querySelector('[data-ttt-score-o]');
      const drawsEl = document.querySelector('[data-ttt-draws]');
      const newBtn = document.querySelector('[data-ttt-new]');
      const modeRadios = Array.from(document.querySelectorAll('input[name="mode"]'));
      const aiRadios = Array.from(document.querySelectorAll('input[name="ai"]'));
      const firstRadios = Array.from(document.querySelectorAll('input[name="first"]'));
      const aiPanel = document.querySelector('[data-ttt-ai]');

      const LINES = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      const state = {
        board: Array(9).fill(''),
        turn: 'X',
        mode: 'pvp',
        aiLevel: 'easy',
        first: 'X',
        lock: false,
        score: { X: 0, O: 0, D: 0 },
      };

      function checkWinner(board) {
        for (const [a,b,c] of LINES) {
          if (board[a] && board[a] === board[b] && board[a] === board[c]) return {win: board[a], line:[a,b,c]};
        }
        if (board.every(Boolean)) return {draw: true};
        return null;
      }

      function emptyIndices(board){ return board.map((v,i)=>v?null:i).filter(i=>i!==null); }

      function minimax(board, player){
        const opponent = player === 'X' ? 'O' : 'X';
        const res = checkWinner(board);
        if (res?.win === 'O') return {score: +10};
        if (res?.win === 'X') return {score: -10};
        if (res?.draw) return {score: 0};
        const moves = [];
        for (const i of emptyIndices(board)){
          const newB = board.slice(); newB[i] = player;
          const next = minimax(newB, opponent);
          moves.push({ index: i, score: next.score });
        }
        if (player === 'O'){
          // maximize O
          return moves.reduce((best,m)=> m.score>best.score?m:best, {score:-Infinity});
        } else {
          // minimize X
          return moves.reduce((best,m)=> m.score<best.score?m:best, {score:Infinity});
        }
      }

      function aiMove(){
        const level = state.aiLevel;
        const empties = emptyIndices(state.board);
        if (!empties.length) return;
        let idx;
        if (level === 'easy'){
          idx = empties[Math.floor(Math.random()*empties.length)];
        } else if (level === 'normal'){
          if (Math.random() < 0.5){
            idx = empties[Math.floor(Math.random()*empties.length)];
          } else {
            idx = minimax(state.board, 'O').index;
          }
        } else {
          idx = minimax(state.board, 'O').index;
        }
        placeMark(idx);
      }

      function render(){
        cells.forEach((btn,i)=>{
          btn.textContent = state.board[i];
          btn.classList.toggle('win', false);
          btn.disabled = !!state.board[i] || state.lock;
        });
        turnEl.textContent = state.turn;
        scoreXEl.textContent = state.score.X;
        scoreOEl.textContent = state.score.O;
        drawsEl.textContent = state.score.D;
        aiPanel.hidden = state.mode !== 'ai';
      }

      function placeMark(i){
        if (state.board[i] || state.lock) return;
        state.board[i] = state.turn;
        const res = checkWinner(state.board);
        if (res?.win){
          state.lock = true;
          state.score[res.win]++;
          for (const k of res.line) cells[k].classList.add('win');
          render();
          return;
        }
        if (res?.draw){
          state.lock = true; state.score.D++; render(); return;
        }
        state.turn = state.turn === 'X' ? 'O' : 'X';
        render();
        if (state.mode === 'ai' && state.turn === 'O'){
          setTimeout(aiMove, 200);
        }
      }

      cells.forEach(btn=> btn.addEventListener('click', ()=>{
        placeMark(Number(btn.dataset.idx));
      }));

      newBtn.addEventListener('click', ()=>{
        state.board.fill(''); state.lock=false; state.turn = state.first; render();
        if (state.mode==='ai' && state.first==='O') setTimeout(aiMove, 200);
      });

      modeRadios.forEach(r=> r.addEventListener('change', ()=>{
        state.mode = modeRadios.find(x=>x.checked).value; render();
        if (state.mode==='ai' && state.turn==='O' && !state.lock) setTimeout(aiMove, 150);
      }));
      aiRadios.forEach(r=> r.addEventListener('change', ()=>{
        state.aiLevel = aiRadios.find(x=>x.checked).value;
      }));
      firstRadios.forEach(r=> r.addEventListener('change', ()=>{
        state.first = firstRadios.find(x=>x.checked).value;
      }));

      render();
    })();
  </script>
</body>
</html>
