<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Tester Klawiatury - Hub</title>
    <link rel="icon" type="image/x-icon" href="https://www.solojuve.com/spolecznosc/zdj%C4%99cia/306-bezimienny-jpg/pobierz">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #ffffff;
            --text: #1a1a1a;
            --text-secondary: #666;
            --border: #e0e0e0;
            --card-bg: #f8f9fa;
            --card-hover: #e9ecef;
            --header-bg: #ffffff;
            --shadow: rgba(0, 0, 0, 0.1);
            --accent: #84cc16; /* Lime */
            --key-bg: #e5e5e5;
            --key-active: #84cc16;
            --key-pressed-history: #d9f99d;
        }

        [data-theme="dark"] {
            --bg: #1a1a1a;
            --text: #ffffff;
            --text-secondary: #aaa;
            --border: #333;
            --card-bg: #2a2a2a;
            --card-hover: #3a3a3a;
            --header-bg: #1a1a1a;
            --shadow: rgba(0, 0, 0, 0.3);
            --accent: #a3e635;
            --key-bg: #444;
            --key-active: #a3e635;
            --key-pressed-history: #3f6212;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: background 0.3s, color 0.3s;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            background: var(--header-bg);
            border-bottom: 1px solid var(--border);
            z-index: 100;
            box-shadow: 0 2px 4px var(--shadow);
            flex-shrink: 0;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text); text-decoration: none; }
        .nav-links { display: flex; gap: 2rem; flex: 1; }
        .nav-links a { color: var(--text-secondary); text-decoration: none; transition: 0.2s; }
        .nav-links a:hover, .nav-links a.active { color: var(--text); }
        #theme-toggle { background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0.25rem; }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 2rem;
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            overflow-y: auto;
        }

        .page-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        h1 { font-size: 2rem; margin-bottom: 0.5rem; }
        .page-header p { color: var(--text-secondary); }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stat-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            padding: 1rem 2rem;
            border-radius: 12px;
            text-align: center;
            min-width: 150px;
        }

        .stat-val { font-size: 2rem; font-weight: bold; color: var(--accent); }
        .stat-label { font-size: 0.9rem; color: var(--text-secondary); }

        /* Keyboard Layout */
        .keyboard-wrapper {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            overflow-x: auto;
        }

        .keyboard {
            display: grid;
            grid-template-columns: repeat(23, 1fr); /* Grid system for keys */
            gap: 6px;
            min-width: 900px;
            user-select: none;
        }

        .key {
            background: var(--key-bg);
            border-radius: 6px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            grid-column: span 1;
            transition: transform 0.05s, background-color 0.1s;
            border-bottom: 3px solid rgba(0,0,0,0.2);
            color: var(--text);
        }

        .key.active {
            background: var(--accent) !important;
            color: #000;
            transform: translateY(2px);
            border-bottom-width: 1px;
        }

        .key.history {
            background: var(--key-pressed-history);
            color: var(--text);
        }

        /* Mouse Tester Area */
        .mouse-area {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .mouse-btn {
            width: 80px;
            height: 120px;
            border: 2px solid var(--border);
            border-radius: 20px 20px 10px 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: 0.1s;
        }

        .mouse-btn.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
        }

        .mouse-scroll {
            width: 40px;
            height: 60px;
            border: 2px solid var(--border);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .mouse-scroll.active { background: var(--accent); color: #000; }

        /* Key Log */
        .log-container {
            background: var(--input-bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            height: 100px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .btn-reset {
            margin: 1rem auto;
            display: block;
            padding: 0.8rem 2rem;
            border: none;
            background: var(--card-hover);
            color: var(--text);
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }
        .btn-reset:hover { background: var(--border); }

        /* Special Key Sizes */
        .k-w2 { grid-column: span 2; }
        .k-w3 { grid-column: span 3; }
        .k-w4 { grid-column: span 4; }
        .k-w5 { grid-column: span 5; }
        .k-space { grid-column: span 13; }

        @media (max-width: 768px) {
            .nav-links { display: none; }
            .keyboard-wrapper { padding: 1rem; }
            .key { font-size: 0.7rem; height: 40px; }
        }
    </style>
</head>
<body>
    <header>
        <nav>
            <a href="../../index.html" class="logo">Hub</a>
            <div class="nav-links">
                <a href="../../gry/gry.html">Gry</a>
                <a href="../../muzyka/muzyka.html">Muzyka</a>
                <a href="../../filmy/filmy glowna.html">Filmy</a>
                <a href="../programy.html" class="active">Narzƒôdzia</a>
            </div>
            <button id="theme-toggle">üåô</button>
        </nav>
    </header>

    <main>
        <div class="page-header">
            <h1>‚å®Ô∏è Tester Klawiatury i Myszki</h1>
            <p>Sprawd≈∫ dzia≈Çanie klawiszy i wykrywanie wci≈õniƒôƒá (Ghosting)</p>
        </div>

        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-val" id="last-key">-</div>
                <div class="stat-label">Ostatni klawisz</div>
            </div>
            <div class="stat-card">
                <div class="stat-val" id="keys-pressed-count">0</div>
                <div class="stat-label">Wci≈õniƒôtych naraz</div>
            </div>
            <div class="stat-card">
                <div class="stat-val" id="total-history">0</div>
                <div class="stat-label">Przetestowanych</div>
            </div>
        </div>

        <div class="keyboard-wrapper">
            <div class="keyboard" id="keyboard">
                <!-- Row 1 -->
                <div class="key" data-code="Escape">ESC</div>
                <div class="key" data-code="F1">F1</div>
                <div class="key" data-code="F2">F2</div>
                <div class="key" data-code="F3">F3</div>
                <div class="key" data-code="F4">F4</div>
                <div class="key" data-code="F5">F5</div>
                <div class="key" data-code="F6">F6</div>
                <div class="key" data-code="F7">F7</div>
                <div class="key" data-code="F8">F8</div>
                <div class="key" data-code="F9">F9</div>
                <div class="key" data-code="F10">F10</div>
                <div class="key" data-code="F11">F11</div>
                <div class="key" data-code="F12">F12</div>
                <div class="key" data-code="PrintScreen">PrtSc</div>
                <div class="key" data-code="ScrollLock">ScrLk</div>
                <div class="key" data-code="Pause">Pause</div>
                <div class="key" style="grid-column: span 7; visibility: hidden;"></div> <!-- Spacer -->

                <!-- Row 2 -->
                <div class="key" data-code="Backquote">`</div>
                <div class="key" data-code="Digit1">1</div>
                <div class="key" data-code="Digit2">2</div>
                <div class="key" data-code="Digit3">3</div>
                <div class="key" data-code="Digit4">4</div>
                <div class="key" data-code="Digit5">5</div>
                <div class="key" data-code="Digit6">6</div>
                <div class="key" data-code="Digit7">7</div>
                <div class="key" data-code="Digit8">8</div>
                <div class="key" data-code="Digit9">9</div>
                <div class="key" data-code="Digit0">0</div>
                <div class="key" data-code="Minus">-</div>
                <div class="key" data-code="Equal">=</div>
                <div class="key k-w2" data-code="Backspace">Back</div>
                <div class="key" data-code="Insert">Ins</div>
                <div class="key" data-code="Home">Home</div>
                <div class="key" data-code="PageUp">PgUp</div>
                <div class="key" data-code="NumLock">Num</div>
                <div class="key" data-code="NumpadDivide">/</div>
                <div class="key" data-code="NumpadMultiply">*</div>
                <div class="key" data-code="NumpadSubtract">-</div>

                <!-- Row 3 -->
                <div class="key k-w2" data-code="Tab">Tab</div>
                <div class="key" data-code="KeyQ">Q</div>
                <div class="key" data-code="KeyW">W</div>
                <div class="key" data-code="KeyE">E</div>
                <div class="key" data-code="KeyR">R</div>
                <div class="key" data-code="KeyT">T</div>
                <div class="key" data-code="KeyY">Y</div>
                <div class="key" data-code="KeyU">U</div>
                <div class="key" data-code="KeyI">I</div>
                <div class="key" data-code="KeyO">O</div>
                <div class="key" data-code="KeyP">P</div>
                <div class="key" data-code="BracketLeft">[</div>
                <div class="key" data-code="BracketRight">]</div>
                <div class="key k-w2" data-code="Backslash">\</div>
                <div class="key" data-code="Delete">Del</div>
                <div class="key" data-code="End">End</div>
                <div class="key" data-code="PageDown">PgDn</div>
                <div class="key" data-code="Numpad7">7</div>
                <div class="key" data-code="Numpad8">8</div>
                <div class="key" data-code="Numpad9">9</div>
                <div class="key" data-code="NumpadAdd" style="grid-row: span 2;">+</div>

                <!-- Row 4 -->
                <div class="key k-w3" data-code="CapsLock">Caps Lock</div>
                <div class="key" data-code="KeyA">A</div>
                <div class="key" data-code="KeyS">S</div>
                <div class="key" data-code="KeyD">D</div>
                <div class="key" data-code="KeyF">F</div>
                <div class="key" data-code="KeyG">G</div>
                <div class="key" data-code="KeyH">H</div>
                <div class="key" data-code="KeyJ">J</div>
                <div class="key" data-code="KeyK">K</div>
                <div class="key" data-code="KeyL">L</div>
                <div class="key" data-code="Semicolon">;</div>
                <div class="key" data-code="Quote">'</div>
                <div class="key k-w4" data-code="Enter">Enter</div>
                <div class="key" style="grid-column: span 3; visibility: hidden;"></div>
                <div class="key" data-code="Numpad4">4</div>
                <div class="key" data-code="Numpad5">5</div>
                <div class="key" data-code="Numpad6">6</div>

                <!-- Row 5 -->
                <div class="key k-w4" data-code="ShiftLeft">Shift</div>
                <div class="key" data-code="KeyZ">Z</div>
                <div class="key" data-code="KeyX">X</div>
                <div class="key" data-code="KeyC">C</div>
                <div class="key" data-code="KeyV">V</div>
                <div class="key" data-code="KeyB">B</div>
                <div class="key" data-code="KeyN">N</div>
                <div class="key" data-code="KeyM">M</div>
                <div class="key" data-code="Comma">,</div>
                <div class="key" data-code="Period">.</div>
                <div class="key" data-code="Slash">/</div>
                <div class="key k-w5" data-code="ShiftRight">Shift</div>
                <div class="key" style="visibility: hidden;"></div>
                <div class="key" data-code="ArrowUp">‚Üë</div>
                <div class="key" style="visibility: hidden;"></div>
                <div class="key" data-code="Numpad1">1</div>
                <div class="key" data-code="Numpad2">2</div>
                <div class="key" data-code="Numpad3">3</div>
                <div class="key" data-code="NumpadEnter" style="grid-row: span 2;">Ent</div>

                <!-- Row 6 -->
                <div class="key k-w2" data-code="ControlLeft">Ctrl</div>
                <div class="key k-w2" data-code="MetaLeft">Win</div>
                <div class="key k-w2" data-code="AltLeft">Alt</div>
                <div class="key k-space" data-code="Space">Space</div>
                <div class="key k-w2" data-code="AltRight">Alt</div>
                <div class="key k-w2" data-code="MetaRight">Win</div>
                <div class="key k-w2" data-code="ContextMenu">Menu</div>
                <div class="key k-w2" data-code="ControlRight">Ctrl</div>
                <div class="key" data-code="ArrowLeft">‚Üê</div>
                <div class="key" data-code="ArrowDown">‚Üì</div>
                <div class="key" data-code="ArrowRight">‚Üí</div>
                <div class="key k-w2" data-code="Numpad0">0</div>
                <div class="key" data-code="NumpadDecimal">.</div>
            </div>
        </div>

        <div class="mouse-area">
            <div class="mouse-btn" id="btn-left">LPM</div>
            <div class="mouse-scroll" id="btn-middle">
                <span style="font-size: 1.5rem;">‚Üï</span>
            </div>
            <div class="mouse-btn" id="btn-right">PPM</div>
        </div>

        <div class="log-container" id="event-log"></div>
        <button class="btn-reset" onclick="resetTest()">Resetuj test</button>
    </main>

    <script>
        // --- THEME ---
        const themeToggle = document.getElementById('theme-toggle');
        const html = document.documentElement;
        const savedTheme = localStorage.getItem('theme') || 'light';
        html.setAttribute('data-theme', savedTheme);
        themeToggle.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';

        themeToggle.addEventListener('click', () => {
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeToggle.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        });

        // --- TESTER LOGIC ---
        const keys = document.querySelectorAll('.key');
        const lastKeyDisplay = document.getElementById('last-key');
        const pressedCountDisplay = document.getElementById('keys-pressed-count');
        const totalHistoryDisplay = document.getElementById('total-history');
        const eventLog = document.getElementById('event-log');
        
        let pressedKeys = new Set();
        let testedKeys = new Set();

        // Keyboard Events
        window.addEventListener('keydown', (e) => {
            e.preventDefault(); // Stop default actions (scrolling, F5, etc.)
            
            pressedKeys.add(e.code);
            testedKeys.add(e.code);
            
            updateUI(e.code, true);
            log(`Wci≈õniƒôto: ${e.code} (${e.key})`);
        });

        window.addEventListener('keyup', (e) => {
            e.preventDefault();
            pressedKeys.delete(e.code);
            updateUI(e.code, false);
        });

        function updateUI(code, isDown) {
            const keyEl = document.querySelector(`.key[data-code="${code}"]`);
            if (keyEl) {
                if (isDown) {
                    keyEl.classList.add('active');
                    // Add visual ripple or pop effect here if wanted
                } else {
                    keyEl.classList.remove('active');
                    keyEl.classList.add('history'); // Mark as tested
                }
            }

            if (isDown) lastKeyDisplay.textContent = code;
            pressedCountDisplay.textContent = pressedKeys.size;
            totalHistoryDisplay.textContent = testedKeys.size;
        }

        function log(msg) {
            const div = document.createElement('div');
            div.textContent = `[${new Date().toLocaleTimeString()}] ${msg}`;
            eventLog.prepend(div);
        }

        function resetTest() {
            pressedKeys.clear();
            testedKeys.clear();
            document.querySelectorAll('.key').forEach(k => {
                k.classList.remove('active');
                k.classList.remove('history');
            });
            eventLog.innerHTML = '';
            pressedCountDisplay.textContent = 0;
            totalHistoryDisplay.textContent = 0;
            lastKeyDisplay.textContent = '-';
            
            // Mouse Reset
            document.getElementById('btn-left').classList.remove('active');
            document.getElementById('btn-middle').classList.remove('active');
            document.getElementById('btn-right').classList.remove('active');
        }

        // Mouse Events
        const mouseArea = document.querySelector('.mouse-area');
        
        mouseArea.addEventListener('mousedown', (e) => {
            e.preventDefault(); // Prevent context menu
            if (e.button === 0) highlightMouse('btn-left');
            if (e.button === 1) highlightMouse('btn-middle');
            if (e.button === 2) highlightMouse('btn-right');
            log(`Mysz: Przycisk ${e.button}`);
        });

        mouseArea.addEventListener('contextmenu', e => e.preventDefault());

        mouseArea.addEventListener('wheel', (e) => {
            e.preventDefault();
            const el = document.getElementById('btn-middle');
            el.style.transform = e.deltaY > 0 ? 'translateY(5px)' : 'translateY(-5px)';
            setTimeout(() => el.style.transform = 'none', 100);
            log(`Mysz: Scroll ${e.deltaY > 0 ? 'D√≥≈Ç' : 'G√≥ra'}`);
        });

        function highlightMouse(id) {
            const el = document.getElementById(id);
            el.classList.add('active');
            // Remove active class after short delay for visual feedback of click
            setTimeout(() => el.classList.remove('active'), 200);
            // Or keep it green to show it works? Let's keep it green if tested?
            // Actually for mouse clicks, immediate feedback is better.
            // Let's add a separate class for "tested" if we want history.
            // For now, simple flash is fine.
        }

    </script>
</body>
</html>